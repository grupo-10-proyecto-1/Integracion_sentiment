<section
  *ngIf="result"
  class="p-6 flex flex-col items-center justify-center animate-in fade-in slide-in-from-bottom-4 duration-500"
>
  <div
    class="w-full md:w-4/5 lg:w-3/4 max-w-4xl rounded-3xl overflow-hidden shadow-2xl transition-all duration-700 bg-gradient-to-br border"
    [ngClass]="containerBackground"
  >
    <div
      #resultCard
      class="bg-indigo-900 dark:bg-slate-900 border border-indigo-700 dark:border-slate-800 rounded-3xl m-[1px] overflow-hidden transition-colors duration-300"
    >
      <!-- HEADER -->
      <div
        class="p-6 border-b border-indigo-800 dark:border-slate-800 flex flex-col md:flex-row justify-between items-center gap-4 bg-indigo-950/30 dark:bg-slate-950/30"
      >
        <div class="flex items-center gap-4">
          <div
            class="p-3 rounded-2xl transition-all duration-500"
            [ngClass]="
              badgeColor.replace('text-', 'bg-').replace('400', '400/20')
            "
          >
            <span class="text-2xl animate-bounce">
              {{
                result.sentiment === "POSITIVE"
                  ? "ğŸ˜"
                  : result.sentiment === "NEGATIVE"
                  ? "ğŸ˜ "
                  : "ğŸ˜"
              }}
            </span>
          </div>
          <div>
            <h3
              class="text-indigo-300 dark:text-slate-400 text-xs font-bold uppercase tracking-widest"
            >
              Resultado del AnÃ¡lisis
            </h3>
            <p
              class="text-xl font-black uppercase tracking-tight"
              [ngClass]="badgeColor"
            >
              Sentimiento {{ result.sentiment | sentimentTranslate }}
            </p>
          </div>
        </div>

        <div class="flex items-center gap-6">
          <div class="flex flex-col items-center md:items-end">
            <span
              class="text-3xl font-mono font-black text-white dark:text-white transition-colors duration-300"
            >
              {{ result.probability * 100 | number : "1.0-0" }}%
            </span>
            <span
              class="text-[10px] text-indigo-300 dark:text-slate-500 font-bold uppercase"
              >Nivel de Confianza</span
            >
          </div>

          <button
            (click)="downloadCertificate()"
            [disabled]="downloading"
            class="group flex items-center gap-2 px-4 py-2 bg-indigo-800 dark:bg-slate-800 hover:bg-indigo-700 dark:hover:bg-slate-700 text-indigo-100 dark:text-slate-300 rounded-xl transition-all border border-indigo-700 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-slate-600"
          >
            <span *ngIf="!downloading">ğŸ“œ</span>
            <span *ngIf="downloading" class="animate-spin">â³</span>
            <span class="text-xs font-bold uppercase tracking-wider"
              >Certificado</span
            >
          </button>
        </div>
      </div>

      <div class="p-8 space-y-8 relative">
        <!-- Background Decor -->
        <div
          class="absolute inset-0 bg-grid-slate-200/[0.2] dark:bg-grid-slate-800/[0.05] -z-10 masking-gradient"
        ></div>

        <div class="relative">
          <svg
            class="absolute -top-4 -left-4 h-8 w-8 text-indigo-400/30 dark:text-slate-800 transition-colors duration-300"
            fill="currentColor"
            viewBox="0 0 32 32"
          >
            <path
              d="M9.333 4.667c-4.417 0-8 3.583-8 8s3.583 8 8 8c.375 0 .739-.026 1.094-.078C9.557 24.281 6.635 26.667 3.333 26.667v2.666c6.229 0 11.333-5.104 11.333-11.333V4.667H9.333zM25.333 4.667c-4.417 0-8 3.583-8 8s3.583 8 8 8c.375 0 .739-.026 1.094-.078C25.557 24.281 22.635 26.667 19.333 26.667v2.666c6.229 0 11.333-5.104 11.333-11.333V4.667h-5.333z"
            />
          </svg>
          <p
            class="text-lg text-white dark:text-slate-300 italic leading-relaxed relative z-10  pl-4 transition-colors duration-300"
            [ngClass]="borderColor"
          >
            "{{ text }}"
          </p>
        </div>

        <div
          class="space-y-3 bg-indigo-950/40 dark:bg-slate-950/40 p-6 rounded-2xl border border-indigo-800/50 dark:border-slate-800/50 transition-colors duration-300 text-indigo-200 dark:text-slate-400"
        >
          <div
            class="flex justify-between text-xs font-bold uppercase tracking-widest"
          >
            <span>PrecisiÃ³n del Veredicto</span>
            <span
              [ngClass]="badgeColor"
              class="rounded-md p-1 bg-indigo-950 dark:bg-slate-900/50"
              >AnÃ¡lisis Completo</span
            >
          </div>
          <div
            class="w-full bg-indigo-950 dark:bg-slate-800 rounded-full h-3 overflow-hidden p-[2px]"
          >
            <div
              class="h-full rounded-full transition-all duration-1000 ease-out shadow-[0_0_15px_rgba(0,0,0,0.5)] relative overflow-hidden"
              [ngClass]="barColor"
              [style.width.%]="result.probability * 100"
            >
              <div class="absolute inset-0 bg-white/20 animate-pulse"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
